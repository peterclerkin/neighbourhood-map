(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(36)},20:function(e,t,a){},21:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(1),i=a.n(r),s=(a(20),a(5)),c=a(6),l=a(8),u=a(7),d=a(9),m=(a(21),a(13)),p=a(14),f=a(4),g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={venues:[],query:"",markers:[],users:[],infowindow:new a.props.google.maps.InfoWindow,error:null,mapError:null},a.onclickLocation=function(){var e=Object(f.a)(Object(f.a)(a)),t=a.state.infowindow;document.querySelector(".location-list").addEventListener("click",function(n){n.target&&"LI"===n.target.nodeName&&function(n){var o=a.state.markers,r=o.findIndex(function(e){return e.title.toLowerCase()===n.target.innerText.toLowerCase()});e.populateInfoWindow(o[r],t,e.state.users[r])}(n)})},a.addMarkers=function(){var e=a.state.users,t=a.props.google,n=a.state.infowindow,o=new t.maps.LatLngBounds;a.state.venues.forEach(function(r,i){var s=new t.maps.Marker({position:{lat:r.location.lat,lng:r.location.lng},map:a.map,title:r.name});s.addListener("click",function(){a.populateInfoWindow(s,n,e[i])}),a.setState(function(e){return{markers:[].concat(Object(p.a)(e.markers),[s])}}),o.extend(s.position)}),a.map.fitBounds(o)},a.populateInfoWindow=function(e,t,n){var o=a.props.google,r=new o.maps.places.PlacesService(a.map),i=new o.maps.Geocoder;t.marker!==e&&(t.marker=e.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1e3),i.geocode({location:e.position},function(a,n){var i=this;n===o.maps.GeocoderStatus.OK?a[1]?r.getDetails({placeId:a[1].place_id},function(a,n){n===o.maps.places.PlacesServiceStatus.OK&&(t.setContent("<h4>Name: <strong>".concat(e.title,"</strong></h4>\n                             <div>Latitude: ").concat(e.getPosition().lat(),"</div>\n                             <div>Longitude: ").concat(e.getPosition().lng(),"</div>")),t.open(i.map,e))}):window.alert("No results found"):window.alert("Geocoder failed due to: "+n)}),t.addListener("closeclick",function(){t.marker=null}))},a.handleValueChange=function(e){a.setState({query:e.target.value})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.foursquare.com/v2/venues/search?client_id=NB4TPAA2Z5R310AIM1TQAIZHV20XYWONFFHG0T23BP2QFEK0&client_secret=LCFAR5MAWSRI0KYFBQATKOD10HGTFGAAGBX0KZ4RNMU4U1UD&limit=6&v=20180323&ll=54.9535897,-7.7406985").then(function(e){if(e.ok)return e.json();throw new Error(e.statusText)}).then(function(t){var a=t.response.venues;e.setState({venues:a}),e.loadMap(),e.onclickLocation()}).catch(function(t){e.setState({error:t.toString()})})}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google.maps,t=this.refs.map,a=i.a.findDOMNode(t),n=new e.LatLng(54.9535897,-7.7406985),o=Object.assign({},{center:n,zoom:10,mapTypeId:"roadmap"});this.map=new e.Map(a,o),this.addMarkers()}}},{key:"render",value:function(){var e=this.state,t=e.markers,a=e.venues,n=e.query,r=e.infowindow;return n?a.forEach(function(e,a){e.name.toLowerCase().includes(n.toLowerCase())?t[a].setVisible(!0):(r.marker===t[a]&&r.close(),t[a].setVisible(!1))}):a.forEach(function(e,a){t.length&&t[a]&&t[a].setVisible(!0)}),o.a.createElement("div",null,this.state.error?o.a.createElement("div",{className:"error"},"An error has occurred; please try again later",o.a.createElement("div",{className:"error-description"},this.state.error)):o.a.createElement("div",{className:"container"},o.a.createElement("nav",{className:"sidebar sidebar-hide"},o.a.createElement("div",{className:"search-bar"},o.a.createElement("input",{role:"search",type:"text",placeholder:"Filter..","aria-labelledby":"search-bar",value:this.state.value,onChange:this.handleValueChange})),o.a.createElement("ul",{className:"location-list"},t.filter(function(e){return e.getVisible()}).map(function(e,t){return o.a.createElement("li",{role:"link",key:t,tabIndex:"0"},e.title)}))),o.a.createElement("div",{role:"application",className:"map",ref:"map"},"Loading map...",this.state.Error||o.a.createElement("div",{className:"error"},this.gm_authFailure()))))}},{key:"gm_authFailure",value:function(){return o.a.createElement("div",null,"Please refresh the page and try again!")}}]),t}(n.Component);document.addEventListener("DOMContentLoaded",function(e){document.getElementsByTagName("SCRIPT").item(1).onerror=function(e){console.log("Sorry! We cant access Google Maps API for now!");var t=document.querySelector("#root"),a=document.createElement("div");a.innerHTML='<div class="error-msg">Sorry! We cant access Google Maps API for now! </div>',t.appendChild(a)}});var h=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).toggleSideBar=function(){document.querySelector(".sidebar").classList.toggle("sidebar-hide")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".menu-icon").addEventListener("click",this.toggleSideBar)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("div",{className:"menu-icon"},o.a.createElement("div",{className:"menu-line"}),o.a.createElement("div",{className:"menu-line"}),o.a.createElement("div",{className:"menu-line"})),o.a.createElement("h1",{className:"App-title"},"Neighbourhood User Map")),o.a.createElement(g,{google:this.props.google}))}}]),t}(n.Component),v=Object(m.GoogleApiWrapper)({apiKey:"AIzaSyC7vgVATg6_LqIfmx61Y6RT-AaBY11TefA"})(h);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.31ad50bf.chunk.js.map